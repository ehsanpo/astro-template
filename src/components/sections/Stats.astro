---
import { Heading } from "../ui/heading";
import { getPortfolioData } from "../../utils/data";
import SectionTitle from "../ui/SectionTitle.astro";

const { charts } = await getPortfolioData();
const overallStats = charts.find((chart) => chart.slug === "Overall");
---

<section class="py-20 bg-gray-50 dark:bg-neutral-900">
  <div class="container mx-auto px-4">
    <Heading
      level="h2"
      gradient
      floating
      className="text-3xl text-center mb-12"
    >
      Skills & Expertise
    </Heading>

    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-8">
      {
        overallStats?.labels.map((label, index) => (
          <div class="text-center">
            <div class="relative mb-2">
              <svg
                class="w-24 h-24 mx-auto stroke-secondary-500 text-primary-500"
                viewBox="0 0 36 36"
              >
                <path
                  d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"
                  fill="none"
                  stroke=""
                  stroke-width="3"
                />
                <path
                  d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="3"
                  stroke-dasharray={`${Number(overallStats?.data[index]) * 10}, 100`}
                />
              </svg>
              <div class="absolute inset-0 flex items-center justify-center">
                <span class="text-xl font-bold text-primary-600">
                  {overallStats?.data[index]}
                </span>
              </div>
            </div>
            <h4 class="font-medium text-gray-900 dark:text-white">{label}</h4>
          </div>
        ))
      }
    </div>
  </div>
</section>
