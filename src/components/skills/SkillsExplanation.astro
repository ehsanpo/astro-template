---
import { getPortfolioData } from "../../utils/data";
const { skills } = await getPortfolioData();
---

<div class="relative inline-block">
  <button
    id="skillsInfoButton"
    class="w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"
    aria-label="Show skills level explanation"
  >
    !
  </button>
  <div
    id="skillsExplanation"
    class="hidden absolute left-0 top-8 w-80 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg z-10"
  >
    <h4 class="font-semibold mb-2 text-gray-900 dark:text-white">
      Skill Levels Explained
    </h4>
    <ul class="space-y-2">
      {
        skills.map(({ range, description }) => (
          <li class="text-sm">
            <span class="font-medium text-gray-900 dark:text-white">
              {range}:
            </span>
            <span class="text-gray-600 dark:text-gray-400"> {description}</span>
          </li>
        ))
      }
    </ul>
  </div>
</div>

<script>
  const button = document.getElementById("skillsInfoButton");
  const explanation = document.getElementById("skillsExplanation");

  button?.addEventListener("click", () => {
    explanation?.classList.toggle("hidden");
  });

  // Close when clicking outside
  document.addEventListener("click", (event) => {
    if (
      !button?.contains(event.target as Node) &&
      !explanation?.contains(event.target as Node)
    ) {
      explanation?.classList.add("hidden");
    }
  });
</script>
