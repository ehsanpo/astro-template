import React, { useEffect, useState } from "react";

const Toggle: React.FC = () => {
	const [theme, setTheme] = useState<string>(() => {
		if (typeof localStorage !== "undefined" && localStorage.getItem("theme")) {
			return localStorage.getItem("theme") || "dark";
		}
		return "dark";
	});

	useEffect(() => {
		if (theme === "light") {
			document.documentElement.classList.remove("dark");
		} else {
			document.documentElement.classList.add("dark");
		}
		window.localStorage.setItem("theme", theme);
	}, [theme]);

	const handleToggleClick = () => {
		setTheme((prevTheme) => (prevTheme === "dark" ? "light" : "dark"));
	};

	return (
		<button
			id="themeToggle"
			className="fixed right-5 top-3 z-20 rounded-full bg-gray-200 p-2 dark:bg-neutral-800"
			onClick={handleToggleClick}
		>
			<svg
				width="24"
				height="24"
				className="hidden dark:block"
				xmlns="http://www.w3.org/2000/svg"
				viewBox="0 0 48 48"
			>
				<path
					fill="currentColor"
					d="M24,9.5c-.5527,0-1-.44775-1-1v-1c0-.55225,.4473-1,1-1s1,.44775,1,1v1c0,.55225-.4473,1-1,1Zm-8.5244,2.77c.4473-.3242,.5469-.9497,.2226-1.397l-.5869-.809c-.3232-.44632-.9511-.54642-1.3965-.2222-.4472,.3242-.5468,.9497-.2226,1.397l.5869,.8091c.1953,.2695,.501,.4125,.8105,.4125,.2032,0,.4092-.062,.586-.1904Zm-5.2656,7.2495c.1709-.5254-.1172-1.0893-.6426-1.2602l-.9512-.3091c-.5254-.1699-1.0889,.1172-1.2598,.6421-.1709,.5254,.1172,1.0893,.6426,1.2602,0,0,1.1573,.3584,1.2598,.3584,.4219,0,.8135-.269,.9512-.6914Zm-1.5938,10.5303l.9512-.3086c.5254-.1709,.8135-.7344,.6426-1.2598-.17-.5244-.7295-.8134-1.2598-.6425l-.9512,.3086c-.5254,.1709-.8135,.7343-.6426,1.2597,.1368,.4229,.5293,.6914,.9512,.6914,.1016,0,.2061-.0156,.3086-.0488Zm6.4951,7.8867l.5869-.8086c.3243-.4472,.2247-1.0722-.2216-1.3974-.4493-.3262-1.0733-.2246-1.3975,.2216l-.5869,.8086c-.3242,.4473-.2246,1.0723,.2217,1.3975,.1777,.1289,.3838,.1904,.5869,.1904,.3096,0,.6142-.1425,.8105-.4121Zm9.8887,2.5635v-1c0-.5527-.4473-1-1-1s-1,.4473-1,1v1c0,.5527,.4473,1,1,1s1-.4473,1-1Zm9.2861-2.3428c.4473-.3242,.5459-.9502,.2207-1.3965l-.5879-.8086c-.3242-.4472-.9492-.5449-1.3964-.2207-.4473,.3243-.5459,.9502-.2207,1.3965l.5878,.8086c.1954,.2696,.5,.4121,.8096,.4121,.2041,0,.4092-.0625,.5869-.1914Zm6.3575-8.75c.1709-.5254-.1172-1.0888-.6426-1.2597l-.9512-.3086c-.5254-.17-1.0898,.1172-1.2598,.6425-.1709,.5254,.1172,1.0889,.6426,1.2598,0,0,1.1572,.3574,1.2598,.3574,.4219,0,.8144-.2685,.9512-.6914Zm-1.5938-9.2456l.9512-.3091c.5254-.1709,.8135-.7348,.6426-1.2602-.1719-.5254-.7364-.8125-1.2598-.6421l-.9512,.3091c-.5254,.1709-.8135,.7348-.6426,1.2602,.1377,.4224,.5293,.6914,.9512,.6914,.1026,0,.2061-.0161,.3086-.0493Zm-5.1309-8.1133l.5879-.809c.3252-.4468,.2256-1.0723-.2207-1.39701-.4472-.32471-1.0732-.22559-1.3965,.22121l-.5878,.8091c-.3252,.4467-.2256,1.0722,.2207,1.3969,.1777,.1289,.3828,.1909,.5869,.1909,.3095,0,.6142-.143,.8095-.4121Zm3.1563,11.9517c0-7.2095-5.8652-13.0747-13.0752-13.0747s-13.0752,5.8652-13.0752,13.0747c0,7.21,5.8652,13.0752,13.0752,13.0752s13.0752-5.8652,13.0752-13.0752Zm-2,0c0,6.1064-4.9688,11.0752-11.0752,11.0752s-11.0752-4.9688-11.0752-11.0752,4.9688-11.0747,11.0752-11.0747,11.0752,4.9683,11.0752,11.0747Z"
				/>
			</svg>
			<svg width="24" height="24" className="block dark:hidden" aria-hidden="true">
				<path
					fill="currentColor"
					d="M12 11.807A9.002 9.002 0 0 1 10.049 2a9.942 9.942 0 0 0-5.12 2.735c-3.905 3.905-3.905 10.237 0 14.142 3.906 3.906 10.237 3.905 14.143 0a9.946 9.946 0 0 0 2.735-5.119A9.003 9.003 0 0 1 12 11.807z"
				></path>
			</svg>
		</button>
	);
};

export default Toggle;
