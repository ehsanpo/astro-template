---
import Layout from "../../layouts/Layout.astro";
import PageHero from "../../components/hero/PageHero.astro";
import { getBlogPosts } from "../../utils/data";
import { BlogCard } from "../../components/blog/BlogCard";

const blogPosts = await getBlogPosts();
const featuredPosts = blogPosts.filter((post) => post.featured === true);
const regularPosts = blogPosts.filter((post) => post.featured !== true);

const allCategories = [
  ...new Set(blogPosts.flatMap((post) => post.category || [])),
];
---

<Layout title="Blog - Thoughts and Insights">
  <PageHero
    title="Blog"
    subtitle="Thoughts, insights, and stories from my journey as a developer"
  />
  <div class="py-20">
    <div class="container mx-auto px-4">
      {
        featuredPosts.length > 0 && (
          <div class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-gray-900 dark:text-white">
              Featured Posts
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
              {featuredPosts.map((post) => (
                <BlogCard post={post} featured={true} client:load />
              ))}
            </div>
          </div>
        )
      }

      <div class="mb-8">
        <h2 class="text-3xl font-bold mb-8 text-gray-900 dark:text-white">
          {featuredPosts.length > 0 ? "All Posts" : "Latest Posts"}
        </h2>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {regularPosts.map((post) => <BlogCard post={post} client:load />)}
      </div>

      {
        blogPosts.length === 0 && (
          <div class="text-center py-16">
            <h3 class="text-2xl font-semibold text-gray-600 dark:text-gray-400 mb-4">
              No blog posts yet
            </h3>
            <p class="text-gray-500 dark:text-gray-500">
              Stay tuned for upcoming articles and insights!
            </p>
          </div>
        )
      }
    </div>
  </div>
</Layout>
