import{r as D,g as P,R as $}from"./index.BoyW3vH1.js";const M=1,F="astro-game-save-v1",T=e=>{let n;const t=new Set,r=(m,h)=>{const k=typeof m=="function"?m(n):m;if(!Object.is(k,n)){const a=n;n=h??(typeof k!="object"||k===null)?k:Object.assign({},n,k),t.forEach(d=>d(n,a))}},o=()=>n,f={setState:r,getState:o,getInitialState:()=>u,subscribe:m=>(t.add(m),()=>t.delete(m)),destroy:()=>{t.clear()}},u=n=e(r,o,f);return f},N=e=>e?T(e):T;var U={exports:{}},H={},G={exports:{}},B={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){function e(a,d){return a===d&&(a!==0||1/a===1/d)||a!==a&&d!==d}function n(a,d){m||o.startTransition===void 0||(m=!0,console.error("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var s=d();if(!h){var l=d();i(s,l)||(console.error("The result of getSnapshot should be cached to avoid an infinite loop"),h=!0)}l=p({inst:{value:s,getSnapshot:d}});var v=l[0].inst,c=l[1];return f(function(){v.value=s,v.getSnapshot=d,t(v)&&c({inst:v})},[a,s,d]),g(function(){return t(v)&&c({inst:v}),a(function(){t(v)&&c({inst:v})})},[a]),u(s),s}function t(a){var d=a.getSnapshot;a=a.value;try{var s=d();return!i(a,s)}catch{return!0}}function r(a,d){return d()}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var o=D,i=typeof Object.is=="function"?Object.is:e,p=o.useState,g=o.useEffect,f=o.useLayoutEffect,u=o.useDebugValue,m=!1,h=!1,k=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?r:n;B.useSyncExternalStore=o.useSyncExternalStore!==void 0?o.useSyncExternalStore:k,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())})();G.exports=B;var W=G.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){function e(u,m){return u===m&&(u!==0||1/u===1/m)||u!==u&&m!==m}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var n=D,t=W,r=typeof Object.is=="function"?Object.is:e,o=t.useSyncExternalStore,i=n.useRef,p=n.useEffect,g=n.useMemo,f=n.useDebugValue;H.useSyncExternalStoreWithSelector=function(u,m,h,k,a){var d=i(null);if(d.current===null){var s={hasValue:!1,value:null};d.current=s}else s=d.current;d=g(function(){function v(y){if(!c){if(c=!0,_=y,y=k(y),a!==void 0&&s.hasValue){var b=s.value;if(a(b,y))return O=b}return O=y}if(b=O,r(_,y))return b;var I=k(y);return a!==void 0&&a(b,I)?(_=y,b):(_=y,O=I)}var c=!1,_,O,w=h===void 0?null:h;return[function(){return v(m())},w===null?void 0:function(){return v(w())}]},[m,h,k,a]);var l=o(u,d[0],d[1]);return p(function(){s.hasValue=!0,s.value=l},[l]),f(l),l},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())})();U.exports=H;var V=U.exports;const z=P(V),{useDebugValue:J}=$,{useSyncExternalStoreWithSelector:X}=z,Y=e=>e;function Q(e,n=Y,t){const r=X(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,t);return J(r),r}const Z=e=>{const n=typeof e=="function"?N(e):e,t=(r,o)=>Q(n,r,o);return Object.assign(t,n),t},q=e=>Z;function ee(e,n){let t;try{t=e()}catch{return}return{getItem:o=>{var i;const p=f=>f===null?null:JSON.parse(f,void 0),g=(i=t.getItem(o))!=null?i:null;return g instanceof Promise?g.then(p):p(g)},setItem:(o,i)=>t.setItem(o,JSON.stringify(i,void 0)),removeItem:o=>t.removeItem(o)}}const L=e=>n=>{try{const t=e(n);return t instanceof Promise?t:{then(r){return L(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return L(r)(t)}}}},te=(e,n)=>(t,r,o)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:l=>l,version:0,merge:(l,v)=>({...v,...l}),...n},p=!1;const g=new Set,f=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return e((...l)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...l)},r,o);const m=L(i.serialize),h=()=>{const l=i.partialize({...r()});let v;const c=m({state:l,version:i.version}).then(_=>u.setItem(i.name,_)).catch(_=>{v=_});if(v)throw v;return c},k=o.setState;o.setState=(l,v)=>{k(l,v),h()};const a=e((...l)=>{t(...l),h()},r,o);let d;const s=()=>{var l;if(!u)return;p=!1,g.forEach(c=>c(r()));const v=((l=i.onRehydrateStorage)==null?void 0:l.call(i,r()))||void 0;return L(u.getItem.bind(u))(i.name).then(c=>{if(c)return i.deserialize(c)}).then(c=>{if(c)if(typeof c.version=="number"&&c.version!==i.version){if(i.migrate)return i.migrate(c.state,c.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return c.state}).then(c=>{var _;return d=i.merge(c,(_=r())!=null?_:a),t(d,!0),h()}).then(()=>{v?.(d,void 0),p=!0,f.forEach(c=>c(d))}).catch(c=>{v?.(void 0,c)})};return o.persist={setOptions:l=>{i={...i,...l},l.getStorage&&(u=l.getStorage())},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>s(),hasHydrated:()=>p,onHydrate:l=>(g.add(l),()=>{g.delete(l)}),onFinishHydration:l=>(f.add(l),()=>{f.delete(l)})},s(),d||a},oe=(e,n)=>(t,r,o)=>{let i={storage:ee(()=>localStorage),partialize:s=>s,version:0,merge:(s,l)=>({...l,...s}),...n},p=!1;const g=new Set,f=new Set;let u=i.storage;if(!u)return e((...s)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...s)},r,o);const m=()=>{const s=i.partialize({...r()});return u.setItem(i.name,{state:s,version:i.version})},h=o.setState;o.setState=(s,l)=>{h(s,l),m()};const k=e((...s)=>{t(...s),m()},r,o);o.getInitialState=()=>k;let a;const d=()=>{var s,l;if(!u)return;p=!1,g.forEach(c=>{var _;return c((_=r())!=null?_:k)});const v=((l=i.onRehydrateStorage)==null?void 0:l.call(i,(s=r())!=null?s:k))||void 0;return L(u.getItem.bind(u))(i.name).then(c=>{if(c)if(typeof c.version=="number"&&c.version!==i.version){if(i.migrate)return[!0,i.migrate(c.state,c.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,c.state];return[!1,void 0]}).then(c=>{var _;const[O,w]=c;if(a=i.merge(w,(_=r())!=null?_:k),t(a,!0),O)return m()}).then(()=>{v?.(a,void 0),a=r(),p=!0,f.forEach(c=>c(a))}).catch(c=>{v?.(void 0,c)})};return o.persist={setOptions:s=>{i={...i,...s},s.storage&&(u=s.storage)},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>d(),hasHydrated:()=>p,onHydrate:s=>(g.add(s),()=>{g.delete(s)}),onFinishHydration:s=>(f.add(s),()=>{f.delete(s)})},i.skipHydration||d(),a||k},ne=(e,n)=>"getStorage"in n||"serialize"in n||"deserialize"in n?te(e,n):oe(e,n),re=ne,S={"/":0,"/portfolio":60,"/skills":50,"/services":50,"/about":70,"/contact":90,"/blog":110,"/music":100,"/cv":80,"/life":0},ie={"unlock-portfolio":"/portfolio","unlock-skills":"/skills","unlock-services":"/services","unlock-about":"/about","unlock-contact":"/contact","unlock-blog":"/blog","unlock-music":"/music","unlock-cv":"/cv","click-power":null,"combo-extender":null,"auto-clicker":null},se=e=>[{id:"unlock-portfolio",title:"Unlock Work",description:"Unlock the Work page in the header.",cost:()=>S["/portfolio"],maxLevel:1,type:"unlock",target:"/portfolio"},{id:"unlock-skills",title:"Unlock Skills",description:"Unlock the Skills page in the header.",cost:()=>S["/skills"],maxLevel:1,type:"unlock",target:"/skills"},{id:"unlock-services",title:"Unlock Services",description:"Unlock the Services page in the header.",cost:()=>S["/services"],maxLevel:1,type:"unlock",target:"/services"},{id:"unlock-about",title:"Unlock About",description:"Unlock the About page in the header.",cost:()=>S["/about"],maxLevel:1,type:"unlock",target:"/about"},{id:"unlock-contact",title:"Unlock Contact",description:"Unlock the Contact page in the header.",cost:()=>S["/contact"],maxLevel:1,type:"unlock",target:"/contact"},{id:"unlock-blog",title:"Unlock Blog",description:"Unlock the Blog page in the header.",cost:()=>S["/blog"],maxLevel:1,type:"unlock",target:"/blog"},{id:"unlock-music",title:"Unlock Music",description:"Unlock the Music page in the header.",cost:()=>S["/music"],maxLevel:1,type:"unlock",target:"/music"},{id:"unlock-cv",title:"Unlock Resume",description:"Unlock the Resume page in the header.",cost:()=>S["/cv"],maxLevel:1,type:"unlock",target:"/cv"},{id:"click-power",title:"Click Power",description:"Earn more coins per click.",cost:()=>20+e.clickPower*15,type:"upgrade"},{id:"combo-extender",title:"Combo Extender",description:"Lengthen the combo window.",cost:()=>25+Math.max(0,(e.combo.windowMs-2e3)/200)*20,type:"utility"},{id:"auto-clicker",title:"Auto-Clicker",description:"Generate passive coins over time.",cost:()=>50+e.autoClicker.level*40,maxLevel:10,type:"utility"}],le=(e,n)=>se(e).find(t=>t.id===n),ce=(e,n)=>{const t=le(e,n);if(!t)return{next:e,success:!1,reason:"Item not found"};const r=t.cost(e);if(e.coins<r)return{next:e,success:!1,reason:"Not enough coins"};if(t.maxLevel&&n==="auto-clicker"&&e.autoClicker.level>=t.maxLevel)return{next:e,success:!1,reason:"Max level reached"};let o={...e,coins:e.coins-r};const i=ie[n];switch(n){case"click-power":{o.clickPower+=1;break}case"combo-extender":{o.combo={...o.combo,windowMs:o.combo.windowMs+200};break}case"auto-clicker":{o.autoClicker={...o.autoClicker,level:o.autoClicker.level+1};break}default:{if(i){if(o.unlocks[i])return{next:e,success:!1,reason:"Already unlocked"};o.unlocks={...o.unlocks,[i]:!0}}break}}return{next:o,success:!0}},ae=5,ue=(e,n)=>{const r=(e.lastClickAt?n-e.lastClickAt<=e.windowMs:!1)?e.streak+1:1,o=Math.min(1+r*.1,ae);return{...e,streak:r,multiplier:o,lastClickAt:n,decayEndsAt:n+e.windowMs}},he=(e,n)=>!e.lastClickAt||!e.decayEndsAt||n<=e.decayEndsAt?e:{...e,streak:0,multiplier:1,lastClickAt:null,decayEndsAt:null},de=[{id:"first-click",title:"First Click",description:"Earn your first coin.",condition:e=>e.totalClicks>=1},{id:"shopper",title:"Shopper",description:"Make your first purchase.",condition:e=>e.lifetimeCoins>e.coins},{id:"link-liberator",title:"Link Liberator",description:"Unlock three header links.",condition:e=>Object.values(e.unlocks).filter(Boolean).length>=4},{id:"combo-master",title:"Combo Master",description:"Reach a 5x combo multiplier.",condition:e=>e.combo.multiplier>=5},{id:"afk-tycoon",title:"AFK Tycoon",description:"Earn 1,000 lifetime coins.",condition:e=>e.lifetimeCoins>=1e3},{id:"life-unlocked",title:"Life Unlocked",description:"Reach Level 10.",condition:e=>e.playerLevel>=10}],A=e=>de.filter(n=>!e.achievements[n.id]?.unlocked&&n.condition(e)),C=(e,n)=>{const t={...e,achievements:{...e.achievements}},r=Date.now();return n.forEach(o=>{t.achievements[o]={unlocked:!0,unlockedAt:r}}),t},K={"/":!0,"/portfolio":!1,"/skills":!1,"/services":!1,"/about":!1,"/contact":!1,"/blog":!1,"/music":!1,"/cv":!1,"/life":!1},fe=["first-click","shopper","link-liberator","combo-master","afk-tycoon","life-unlocked"],j=()=>fe.reduce((e,n)=>(e[n]={unlocked:!1,unlockedAt:null},e),{}),E=()=>({mode:"off",coins:0,lifetimeCoins:0,totalClicks:0,clickPower:1,combo:{multiplier:1,streak:0,lastClickAt:null,windowMs:2e3,decayEndsAt:null},autoClicker:{level:0,intervalMs:2e3,amountPerTick:1,lastTickAt:null,running:!1},unlocks:{...K},achievements:j(),playerLevel:1,playerXp:0,showHUD:!1,shopOpen:!1,toasts:[],version:M}),me=F,ve=e=>{if(!e||typeof e!="object")return E();const n=e;return{...E(),...n,combo:{...E().combo,...n.combo},autoClicker:{...E().autoClicker,...n.autoClicker},unlocks:{...K,...n.unlocks},achievements:{...j(),...n.achievements},mode:"off",showHUD:!1,shopOpen:!1,version:M}},R=e=>({level:Math.max(1,Math.floor(e/150)+1),xp:e}),x=(e,n)=>[...e.toasts.slice(-4),...n].slice(-5),ke=q()(re((e,n)=>({...E(),enableGame:()=>{e(t=>t.mode==="active"?t:{...t,mode:"active",showHUD:!0})},exitGame:()=>{e(t=>({...t,mode:"off",showHUD:!1,shopOpen:!1,combo:{...t.combo,streak:0,multiplier:1,decayEndsAt:null,lastClickAt:null},autoClicker:{...t.autoClicker,running:!1,lastTickAt:null}}))},addClick:(t="manual")=>{const r=Date.now();e(o=>{const i=ue(o.combo,r),p=Math.max(1,o.clickPower)*i.multiplier,g=o.coins+p,f=o.lifetimeCoins+p,u=o.totalClicks+1,m=R(f),h={...o.unlocks};m.level>=10&&(h["/life"]=!0);let k={...o,coins:g,lifetimeCoins:f,totalClicks:u,combo:i,playerLevel:m.level,playerXp:m.xp,unlocks:h};const a=A(k);if(a.length){const d=C(k,a.map(s=>s.id));return{...k,...d,toasts:x(o,a.map(s=>({id:`${s.id}-${r}`,title:s.title,message:s.description,createdAt:r})))}}return k})},addCoins:t=>{Number.isFinite(t)&&e(r=>{const o=r.coins+t,i=r.lifetimeCoins+t,p=R(i),g={...r.unlocks};p.level>=10&&(g["/life"]=!0);let f={...r,coins:o,lifetimeCoins:i,playerLevel:p.level,playerXp:p.xp,unlocks:g};const u=A(f);if(u.length){const m=C(f,u.map(h=>h.id));return{...f,...m,toasts:x(r,u.map(h=>({id:`${h.id}-${Date.now()}`,title:h.title,message:h.description,createdAt:Date.now()})))}}return f})},purchaseItem:t=>{e(r=>{const{next:o,success:i}=ce(r,t);if(!i)return r;const p=A(o);if(p.length){const g=C(o,p.map(f=>f.id));return{...o,...g,toasts:x(r,p.map(f=>({id:`${f.id}-${Date.now()}`,title:f.title,message:f.description,createdAt:Date.now()})))}}return o})},toggleShop:t=>e(r=>({...r,shopOpen:typeof t=="boolean"?t:!r.shopOpen})),ackToast:t=>e(r=>({...r,toasts:r.toasts.filter(o=>o.id!==t)})),setHUD:t=>e(r=>({...r,showHUD:t}))}),{name:me,version:1,merge:(e,n)=>{const t=ve(e??n);return{...n,...t}}}));export{se as b,he as d,ke as u};
