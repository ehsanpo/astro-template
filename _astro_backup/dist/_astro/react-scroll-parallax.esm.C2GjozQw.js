import{S as R,P as C,p as y}from"./parallax-controller.esm.C3FdbzjI.js";import{R as f,r as s}from"./index.BoyW3vH1.js";function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},h.apply(this,arguments)}function P(e,t){if(e==null)return{};var a={},r=Object.keys(e),n,l;for(l=0;l<r.length;l++)n=r[l],!(t.indexOf(n)>=0)&&(a[n]=e[n]);return a}function j(e){return Object.keys(e).forEach(function(t){return e[t]===void 0&&delete e[t]}),e}var k=["disabled","easing","endScroll","onChange","onEnter","onExit","onProgressChange","opacity","rootMargin","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","shouldAlwaysCompleteAnimation","shouldDisableScalingTranslations","speed","startScroll","targetElement","translateX","translateY"];function E(e){var t=e.disabled,a=e.easing,r=e.endScroll,n=e.onChange,l=e.onEnter,i=e.onExit,u=e.onProgressChange,o=e.opacity,c=e.rootMargin,x=e.rotate,m=e.rotateX,d=e.rotateY,v=e.rotateZ,g=e.scale,A=e.scaleX,X=e.scaleY,I=e.scaleZ,M=e.shouldAlwaysCompleteAnimation,Y=e.shouldDisableScalingTranslations,_=e.speed,O=e.startScroll,D=e.targetElement,T=e.translateX,Z=e.translateY,B=P(e,k),L=j({disabled:t,easing:a,endScroll:r,onChange:n,onEnter:l,onExit:i,onProgressChange:u,opacity:o,rootMargin:c,rotate:x,rotateX:m,rotateY:d,rotateZ:v,scale:g,scaleX:A,scaleY:X,scaleZ:I,shouldAlwaysCompleteAnimation:M,shouldDisableScalingTranslations:Y,speed:_,startScroll:O,targetElement:D,translateX:T,translateY:Z});return{parallaxProps:L,rest:B}}function K(e){s.useEffect(function(){var t=typeof window>"u",a=e instanceof C;if(!t&&!e&&!a)throw new Error("Must wrap your application's <Parallax /> components in a <ParallaxProvider />.")},[e])}var S=f.createContext(null);function H(){var e=s.useContext(S),t=typeof window>"u";if(t)return null;if(!e)throw new Error("Could not find `react-scroll-parallax` context value. Please ensure the component is wrapped in a <ParallaxProvider>");return e}function w(e){var t=H(),a=s.useRef(null),r=E(e),n=r.parallaxProps;K(t);var l=s.useState(),i=l[0],u=l[1];return s.useEffect(function(){var o;if(a.current instanceof HTMLElement){var c={el:a.current,props:n};o=t?.createElement(c),u(o)}else throw new Error("You must assign the ref returned by the useParallax() hook to an HTML Element.");return function(){o&&t?.removeElementById(o.id)}},[]),s.useEffect(function(){i&&(e.disabled&&t?.resetElementStyles(i),t?.updateElementPropsById(i.id,n))},[e.disabled,e.easing,e.endScroll,e.onChange,e.onEnter,e.onExit,e.onProgressChange,e.opacity,e.rootMargin,e.rotate,e.rotateX,e.rotateY,e.rotateZ,e.scale,e.scaleX,e.scaleY,e.scaleZ,e.shouldAlwaysCompleteAnimation,e.shouldDisableScalingTranslations,e.speed,e.startScroll,e.targetElement,e.translateX,e.translateY]),{ref:a,controller:t,element:i}}function Q(e){var t=E(e),a=t.parallaxProps,r=t.rest,n=w(a),l=n.ref;return f.createElement("div",Object.assign({ref:l},r),e.children)}var U={height:0};function V(e){if(Array.isArray(e.translateY)){var t=y(e.translateY[0]),a=y(e.translateY[1]);if(t.unit==="px"&&a.unit==="px")return{top:Math.abs(a.value)*-1+"px",bottom:Math.abs(t.value)*-1+"px"};if(t.unit==="%"&&a.unit==="%"){var r,n,l=(r=(n=e.targetElement)==null?void 0:n.getBoundingClientRect())!=null?r:U,i=Math.abs(l.height*.01*a.value)*-1,u=Math.abs(l.height*.01*t.value)*-1;return{top:i+"px",bottom:u+"px"}}}if(e.speed){var o=e.speed||0,c=Math.abs(o)*10*-1;return{top:c+"px",bottom:c+"px"}}return{}}function z(e){return e.image?{backgroundImage:"url("+e.image+")",backgroundPosition:"center",backgroundSize:"cover"}:{}}var F=["children","disabled","style","expanded","image","testId"],W={position:"absolute",top:0,left:0,right:0,bottom:0},b=function(t){var a=E(t),r=a.parallaxProps,n=a.rest,l=n.style,i=n.expanded,u=i===void 0?!0:i,o=n.testId,c=P(n,F),x=z(t),m=u?V(t):{},d=w(h({targetElement:t.targetElement,shouldDisableScalingTranslations:!0},r));return f.createElement("div",Object.assign({"data-testid":o,ref:d.ref,style:h({},x,W,m,l)},c),n.children)},$=["disabled","style","layers"],q={position:"relative",overflow:"hidden",width:"100%"},p=function(t){var a=s.useState(null),r=a[0],n=a[1],l=s.useRef(null);s.useEffect(function(){n(l.current)},[]);var i=t.style,u=t.layers,o=u===void 0?[]:u,c=P(t,$);function x(){if(r){var d=o&&o.length>0;if(d)return o.map(function(v,g){return f.createElement(b,Object.assign({},v,{targetElement:r,key:"layer-"+g,testId:"layer-"+g}))})}return null}function m(){return r?f.Children.map(t.children,function(d){var v=d;if(v?.type===b){var g=f.cloneElement(v,{targetElement:r});return g}return d}):null}return f.createElement("div",Object.assign({ref:l,style:h({},q,i)},c),x(),m())},G=function(t){var a=typeof window>"u";return a?null:C.init(t)};function ee(e){var t=s.useRef(null);return t.current||(t.current=G({scrollAxis:e.scrollAxis||R.vertical,scrollContainer:e.scrollContainer,disabled:e.isDisabled})),s.useEffect(function(){e.scrollContainer&&t.current&&t.current.updateScrollContainer(e.scrollContainer)},[e.scrollContainer,t.current]),s.useEffect(function(){e.isDisabled&&t.current&&t.current.disableParallaxController(),!e.isDisabled&&t.current&&t.current.enableParallaxController()},[e.isDisabled,t.current]),s.useEffect(function(){return function(){t?.current&&t?.current.destroy()}},[]),f.createElement(S.Provider,{value:t.current},e.children)}export{ee as P,Q as a,p as b};
