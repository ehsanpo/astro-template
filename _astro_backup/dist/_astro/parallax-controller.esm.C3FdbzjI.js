import{g as at}from"./index.BoyW3vH1.js";var lt=4,ot=.001,ht=1e-7,ut=10,C=11,A=1/(C-1),dt=typeof Float32Array=="function";function Z(t,i){return 1-3*i+3*t}function q(t,i){return 3*i-6*t}function J(t){return 3*t}function X(t,i,s){return((Z(i,s)*t+q(i,s))*t+J(i))*t}function K(t,i,s){return 3*Z(i,s)*t*t+2*q(i,s)*t+J(i)}function ct(t,i,s,e,r){var n,a,o=0;do a=i+(s-i)/2,n=X(a,e,r)-t,n>0?s=a:i=a;while(Math.abs(n)>ht&&++o<ut);return a}function ft(t,i,s,e){for(var r=0;r<lt;++r){var n=K(i,s,e);if(n===0)return i;var a=X(i,s,e)-t;i-=a/n}return i}function vt(t){return t}var pt=function(i,s,e,r){if(!(0<=i&&i<=1&&0<=e&&e<=1))throw new Error("bezier x values must be in [0, 1] range");if(i===s&&e===r)return vt;for(var n=dt?new Float32Array(C):new Array(C),a=0;a<C;++a)n[a]=X(a*A,i,e);function o(u){for(var l=0,h=1,d=C-1;h!==d&&n[h]<=u;++h)l+=A;--h;var v=(u-n[h])/(n[h+1]-n[h]),f=l+v*A,c=K(f,i,e);return c>=ot?ft(u,f,i,e):c===0?f:ct(u,l,l+A,i,e)}return function(l){return l===0?0:l===1?1:X(o(l),s,r)}};const T=at(pt);var Q=function(i){this.startX=i.startX,this.startY=i.startY,this.endX=i.endX,this.endY=i.endY,this.totalX=this.endX-this.startX,this.totalY=this.endY-this.startY,this.startMultiplierX=i.startMultiplierX||1,this.endMultiplierX=i.endMultiplierX||1,this.startMultiplierY=i.startMultiplierY||1,this.endMultiplierY=i.endMultiplierY||1};function y(){return y=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&(t[e]=s[e])}return t},y.apply(this,arguments)}var L;(function(t){t.speed="speed",t.translateX="translateX",t.translateY="translateY",t.rotate="rotate",t.rotateX="rotateX",t.rotateY="rotateY",t.rotateZ="rotateZ",t.scale="scale",t.scaleX="scaleX",t.scaleY="scaleY",t.scaleZ="scaleZ",t.opacity="opacity"})(L||(L={}));var O;(function(t){t.px="px",t["%"]="%",t.vh="vh",t.vw="vw"})(O||(O={}));var x;(function(t){t.deg="deg",t.turn="turn",t.rad="rad"})(x||(x={}));var F;(function(t){t[""]=""})(F||(F={}));var g;(function(t){t.vertical="vertical",t.horizontal="horizontal"})(g||(g={}));var R;(function(t){t.ease="ease",t.easeIn="easeIn",t.easeOut="easeOut",t.easeInOut="easeInOut",t.easeInQuad="easeInQuad",t.easeInCubic="easeInCubic",t.easeInQuart="easeInQuart",t.easeInQuint="easeInQuint",t.easeInSine="easeInSine",t.easeInExpo="easeInExpo",t.easeInCirc="easeInCirc",t.easeOutQuad="easeOutQuad",t.easeOutCubic="easeOutCubic",t.easeOutQuart="easeOutQuart",t.easeOutQuint="easeOutQuint",t.easeOutSine="easeOutSine",t.easeOutExpo="easeOutExpo",t.easeOutCirc="easeOutCirc",t.easeInOutQuad="easeInOutQuad",t.easeInOutCubic="easeInOutCubic",t.easeInOutQuart="easeInOutQuart",t.easeInOutQuint="easeInOutQuint",t.easeInOutSine="easeInOutSine",t.easeInOutExpo="easeInOutExpo",t.easeInOutCirc="easeInOutCirc",t.easeInBack="easeInBack",t.easeOutBack="easeOutBack",t.easeInOutBack="easeInOutBack"})(R||(R={}));var V=0;function mt(){return++V,V}var _t=function(){function t(s){var e=s.el.getBoundingClientRect();if(s.view.scrollContainer){var r=s.view.scrollContainer.getBoundingClientRect();e=y({},e,{top:e.top-r.top,right:e.right-r.left,bottom:e.bottom-r.top,left:e.left-r.left})}this.height=s.el.offsetHeight,this.width=s.el.offsetWidth,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,s.rootMargin&&this._setRectWithRootMargin(s.rootMargin)}var i=t.prototype;return i._setRectWithRootMargin=function(e){var r=e.top+e.bottom,n=e.left+e.right;this.top-=e.top,this.right+=e.right,this.bottom+=e.bottom,this.left-=e.left,this.height+=r,this.width+=n},t}(),gt=[F[""],O.px,O["%"],O.vh,O.vw,x.deg,x.turn,x.rad];function Y(t,i){i===void 0&&(i=O["%"]);var s={value:0,unit:i};if(typeof t>"u")return s;var e=typeof t=="number"||typeof t=="string";if(!e)throw new Error("Invalid value provided. Must provide a value as a string or number");t=String(t),s.value=parseFloat(t),s.unit=t.match(/[\d.\-+]*\s*(.*)/)[1]||i;var r=gt.includes(s.unit);if(!r)throw new Error("Invalid unit provided.");return s}var B={ease:[.25,.1,.25,1],easeIn:[.42,0,1,1],easeOut:[0,0,.58,1],easeInOut:[.42,0,.58,1],easeInQuad:[.55,.085,.68,.53],easeInCubic:[.55,.055,.675,.19],easeInQuart:[.895,.03,.685,.22],easeInQuint:[.755,.05,.855,.06],easeInSine:[.47,0,.745,.715],easeInExpo:[.95,.05,.795,.035],easeInCirc:[.6,.04,.98,.335],easeOutQuad:[.25,.46,.45,.94],easeOutCubic:[.215,.61,.355,1],easeOutQuart:[.165,.84,.44,1],easeOutQuint:[.23,1,.32,1],easeOutSine:[.39,.575,.565,1],easeOutExpo:[.19,1,.22,1],easeOutCirc:[.075,.82,.165,1],easeInOutQuad:[.455,.03,.515,.955],easeInOutCubic:[.645,.045,.355,1],easeInOutQuart:[.77,0,.175,1],easeInOutQuint:[.86,0,.07,1],easeInOutSine:[.445,.05,.55,.95],easeInOutExpo:[1,0,0,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};function G(t){if(Array.isArray(t))return T(t[0],t[1],t[2],t[3]);if(typeof t=="string"&&typeof B[t]<"u"){var i=B[t];return T(i[0],i[1],i[2],i[3])}}var wt=Object.values(L),Et={speed:"px",translateX:"%",translateY:"%",rotate:"deg",rotateX:"deg",rotateY:"deg",rotateZ:"deg",scale:"",scaleX:"",scaleY:"",scaleZ:"",opacity:""};function U(t,i){var s={};return wt.forEach(function(e){var r=Et[e];if(typeof t?.[e]=="number"){var n=t?.[e],a=(n||0)*10+"px",o=(n||0)*-10+"px",u=Y(a),l=Y(o),h={start:u.value,end:l.value,unit:u.unit};i===g.vertical&&(s.translateY=h),i===g.horizontal&&(s.translateX=h)}if(Array.isArray(t?.[e])){var d=t?.[e];if(typeof d[0]<"u"&&typeof d[1]<"u"){var v=Y(d?.[0],r),f=Y(d?.[1],r),c=G(d?.[2]);if(s[e]={start:v.value,end:f.value,unit:v.unit,easing:c},v.unit!==f.unit)throw new Error("Must provide matching units for the min and max offset values of each axis.")}}}),s}function k(t,i,s,e){var r=s-t,n=r/i;return e&&(n=e(n)),n}function yt(t,i,s){var e=s>=t&&s<=i;return e}function bt(t,i,s,e,r){return(s-i)*(t-e)/(r-e)+i}function tt(t,i){var s=bt(typeof t.easing=="function"?t.easing(i):i,t?.start||0,t?.end||0,0,1);return{value:s,unit:t?.unit}}var St=Object.values(L).filter(function(t){return t!=="opacity"});function Ot(t,i){var s=Object.keys(i),e=s.includes("opacity"),r="transform"+(e?",opacity":"");t.style.willChange=r}function It(t,i,s){if(s){var e=xt(t,i),r=Ct(t,i);s.style.transform=e,s.style.opacity=r}}function Ct(t,i){var s=t.opacity&&tt(t.opacity,i);if(typeof s>"u"||typeof s.value>"u"||typeof s.unit>"u")return"";var e=""+s.value;return e}function xt(t,i){var s=St.reduce(function(e,r){var n=t[r]&&tt(t[r],i);if(typeof n>"u"||typeof n.value>"u"||typeof n.unit>"u")return e;var a=r+"("+n.value+n.unit+")";return e+a},"");return s}function P(t){var i=t.el;i&&(i.style.transform="",i.style.opacity="")}function At(t,i,s,e){var r=t.top-i.height,n=t.left-i.width,a=t.bottom,o=t.right;n+=s.x,o+=s.x,r+=s.y,a+=s.y,e&&(s.y+t.top<i.height&&(r=0),s.x+t.left<i.width&&(n=0),a>i.scrollHeight-i.height&&(a=i.scrollHeight-i.height),o>i.scrollWidth-i.width&&(o=i.scrollWidth-i.width));var u=new Q({startX:n,startY:r,endX:o,endY:a});return u}function I(t,i,s){var e=i>t,r=(Math.abs(t)+Math.abs(i))*(e?-1:1),n=s+r,a=Math.max(s/n,1);return a}function N(t,i){var s=t.start,e=t.end,r=t.unit;if(r==="%"){var n=i/100;s=s*n,e=e*n}if(r==="vw"){var a=s/100,o=e/100;s=window.innerWidth*a,e=window.innerWidth*o}if(r==="vh"){var u=s/100,l=e/100;s=window.innerHeight*u,e=window.innerHeight*l}return{start:s,end:e}}var j={start:0,end:0,unit:""};function Yt(t,i,s,e,r,n){var a=s.translateX||j,o=s.translateY||j,u=N(a,t.width),l=u.start,h=u.end,d=N(o,t.height),v=d.start,f=d.end,c=t.top-i.height,p=t.left-i.width,m=t.bottom,_=t.right,w=1,b=1;r===g.vertical&&(w=I(v,f,i.height+t.height),b=w);var E=1,S=1;if(r===g.horizontal&&(E=I(l,h,i.width+t.width),S=E),v<0&&(c=c+v*w),f>0&&(m=m+f*b),l<0&&(p=p+l*E),h>0&&(_=_+h*S),p+=e.x,_+=e.x,c+=e.y,m+=e.y,n){var z=e.y+t.top<i.height,M=e.x+t.left<i.width,W=e.y+t.bottom>i.scrollHeight-i.height,H=e.x+t.right>i.scrollWidth-i.height;if(z&&W&&(w=1,b=1,c=0,m=i.scrollHeight-i.height),M&&H&&(E=1,S=1,p=0,_=i.scrollWidth-i.width),!z&&W){c=t.top-i.height+e.y,m=i.scrollHeight-i.height;var et=m-c;w=I(v,f,et),b=1,v<0&&(c=c+v*w)}if(!M&&H){p=t.left-i.width+e.x,_=i.scrollWidth-i.width;var it=_-p;E=I(l,h,it),S=1,l<0&&(p=p+l*E)}if(z&&!W){c=0,m=t.bottom+e.y;var st=m-c;w=1,b=I(v,f,st),f>0&&(m=m+f*b)}if(M&&!H){p=0,_=t.right+e.x;var rt=_-p;E=1,S=I(l,h,rt),h>0&&(_=_+h*S)}}var nt=new Q({startX:p,startY:c,endX:_,endY:m,startMultiplierX:E,endMultiplierX:S,startMultiplierY:w,endMultiplierY:b});return nt}function Pt(t,i){var s=y({},t);return s.translateX&&(s.translateX=y({},t.translateX,{start:s.translateX.start*i.startMultiplierX,end:s.translateX.end*i.endMultiplierX})),s.translateY&&(s.translateY=y({},t.translateY,{start:s.translateY.start*i.startMultiplierY,end:s.translateY.end*i.endMultiplierY})),s}function Xt(t,i,s){return t.rootMargin||t.targetElement||t.shouldDisableScalingTranslations?!1:!!(i.translateX&&s===g.horizontal||i.translateY&&s===g.vertical)}var D=function(i,s,e){return Math.min(Math.max(i,s),e)},Lt=function(){function t(s){this.el=s.el,this.props=s.props,this.scrollAxis=s.scrollAxis,this.disabledParallaxController=s.disabledParallaxController||!1,this.id=mt(),this.effects=U(this.props,this.scrollAxis),this.isInView=null,this.progress=0,this._setElementEasing(s.props.easing),Ot(s.el,this.effects)}var i=t.prototype;return i.updateProps=function(e){return this.props=y({},this.props,e),this.effects=U(e,this.scrollAxis),this._setElementEasing(e.easing),this},i.setCachedAttributes=function(e,r){P(this),this.rect=new _t({el:this.props.targetElement||this.el,rootMargin:this.props.rootMargin,view:e});var n=Xt(this.props,this.effects,this.scrollAxis);return typeof this.props.startScroll=="number"&&typeof this.props.endScroll=="number"?(this.limits=new Q({startX:this.props.startScroll,startY:this.props.startScroll,endX:this.props.endScroll,endY:this.props.endScroll}),this._setElementStyles(),this):(n?(this.limits=Yt(this.rect,e,this.effects,r,this.scrollAxis,this.props.shouldAlwaysCompleteAnimation),this.scaledEffects=Pt(this.effects,this.limits)):this.limits=At(this.rect,e,r,this.props.shouldAlwaysCompleteAnimation),this._setElementStyles(),this)},i._updateElementIsInView=function(e){var r=this.isInView===null;e!==this.isInView&&(e?this.props.onEnter&&this.props.onEnter(this):r||(this._setFinalProgress(),this._setElementStyles(),this.props.onExit&&this.props.onExit(this))),this.isInView=e},i._setFinalProgress=function(){var e=D(Math.round(this.progress),0,1);this._updateElementProgress(e)},i._setElementStyles=function(){if(!(this.props.disabled||this.disabledParallaxController)){var e=this.scaledEffects||this.effects;It(e,this.progress,this.el)}},i._updateElementProgress=function(e){this.progress=e,this.props.onProgressChange&&this.props.onProgressChange(this.progress),this.props.onChange&&this.props.onChange(this)},i._setElementEasing=function(e){this.easing=G(e)},i.updateElementOptions=function(e){this.scrollAxis=e.scrollAxis,this.disabledParallaxController=e.disabledParallaxController||!1},i.updatePosition=function(e){if(!this.limits)return this;var r=this.scrollAxis===g.vertical,n=this.isInView===null,a=r?this.limits.startY:this.limits.startX,o=r?this.limits.endY:this.limits.endX,u=r?this.limits.totalY:this.limits.totalX,l=r?e.y:e.x,h=yt(a,o,l);if(this._updateElementIsInView(h),h){var d=k(a,u,l,this.easing);this._updateElementProgress(d),this._setElementStyles()}else n&&(this.progress=D(Math.round(k(a,u,l,this.easing)),0,1),this._setElementStyles());return this},t}(),$=function(){function t(s){this.scrollContainer=s.scrollContainer,this.width=s.width,this.height=s.height,this.scrollHeight=s.scrollHeight,this.scrollWidth=s.scrollWidth}var i=t.prototype;return i.hasChanged=function(e){return e.width!==this.width||e.height!==this.height||e.scrollWidth!==this.scrollWidth||e.scrollHeight!==this.scrollHeight},i.setSize=function(e){return this.width=e.width,this.height=e.height,this.scrollHeight=e.scrollHeight,this.scrollWidth=e.scrollWidth,this},t}(),zt=function(){function t(s,e){this.x=s,this.y=e,this.dx=0,this.dy=0}var i=t.prototype;return i.setScroll=function(e,r){return this.dx=e-this.x,this.dy=r-this.y,this.x=e,this.y=r,this},t}();function Mt(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return t=!0,!0}});window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch{}return t}var Ht=function(){function t(s){var e=s.scrollAxis,r=e===void 0?g.vertical:e,n=s.scrollContainer,a=s.disabled,o=a===void 0?!1:a;this.disabled=o,this.scrollAxis=r,this.elements=[],this._hasScrollContainer=!!n,this.viewEl=n??window;var u=this._getScrollPosition(),l=u[0],h=u[1];this.scroll=new zt(l,h),this.view=new $({width:0,height:0,scrollWidth:0,scrollHeight:0,scrollContainer:this._hasScrollContainer?n:void 0}),this._ticking=!1,this._supportsPassive=Mt(),this._bindAllMethods(),!this.disabled&&(this._addListeners(this.viewEl),this._addResizeObserver(),this._setViewSize())}t.init=function(e){var r=typeof window<"u";if(!r)throw new Error("Looks like ParallaxController.init() was called on the server. This method must be called on the client.");return new t(e)};var i=t.prototype;return i._bindAllMethods=function(){var e=this;["_addListeners","_removeListeners","_getScrollPosition","_handleScroll","_handleUpdateCache","_updateAllElements","_updateElementPosition","_setViewSize","_addResizeObserver","_checkIfViewHasChanged","_getViewParams","getElements","createElement","removeElementById","resetElementStyles","updateElementPropsById","update","updateScrollContainer","destroy"].forEach(function(r){e[r]=e[r].bind(e)})},i._addListeners=function(e){e.addEventListener("scroll",this._handleScroll,this._supportsPassive?{passive:!0}:!1),window.addEventListener("resize",this._handleUpdateCache,!1),window.addEventListener("blur",this._handleUpdateCache,!1),window.addEventListener("focus",this._handleUpdateCache,!1),window.addEventListener("load",this._handleUpdateCache,!1)},i._removeListeners=function(e){var r;e.removeEventListener("scroll",this._handleScroll,!1),window.removeEventListener("resize",this._handleUpdateCache,!1),window.removeEventListener("blur",this._handleUpdateCache,!1),window.removeEventListener("focus",this._handleUpdateCache,!1),window.removeEventListener("load",this._handleUpdateCache,!1),(r=this._resizeObserver)==null||r.disconnect()},i._addResizeObserver=function(){var e=this;try{var r=this._hasScrollContainer?this.viewEl:document.documentElement;this._resizeObserver=new ResizeObserver(function(){return e.update()}),this._resizeObserver.observe(r)}catch{console.warn("Failed to create the resize observer in the ParallaxContoller")}},i._getScrollPosition=function(){var e=this._hasScrollContainer?this.viewEl.scrollLeft:window.pageXOffset,r=this._hasScrollContainer?this.viewEl.scrollTop:window.pageYOffset;return[e,r]},i._handleScroll=function(){var e,r=this._getScrollPosition(),n=r[0],a=r[1];this.scroll.setScroll(n,a),!this._ticking&&((e=this.elements)==null?void 0:e.length)>0&&(this._ticking=!0,window.requestAnimationFrame(this._updateAllElements))},i._handleUpdateCache=function(){this._setViewSize(),this._updateAllElements({updateCache:!0})},i._updateAllElements=function(e){var r=this,n=e===void 0?{}:e,a=n.updateCache;this.elements&&this.elements.forEach(function(o){a&&o.setCachedAttributes(r.view,r.scroll),r._updateElementPosition(o)}),this._ticking=!1},i._updateElementPosition=function(e){e.props.disabled||this.disabled||e.updatePosition(this.scroll)},i._getViewParams=function(){if(this._hasScrollContainer){var e=this.viewEl.offsetWidth,r=this.viewEl.offsetHeight,n=this.viewEl.scrollHeight,a=this.viewEl.scrollWidth;return this.view.setSize({width:e,height:r,scrollHeight:n,scrollWidth:a})}var o=document.documentElement,u=window.innerWidth||o.clientWidth,l=window.innerHeight||o.clientHeight,h=o.scrollHeight,d=o.scrollWidth;return{width:u,height:l,scrollHeight:h,scrollWidth:d}},i._setViewSize=function(){return this.view.setSize(this._getViewParams())},i._checkIfViewHasChanged=function(){return this.view.hasChanged(this._getViewParams())},i.getElements=function(){return this.elements},i.createElement=function(e){var r=new Lt(y({},e,{scrollAxis:this.scrollAxis,disabledParallaxController:this.disabled}));return r.setCachedAttributes(this.view,this.scroll),this.elements=this.elements?[].concat(this.elements,[r]):[r],this._updateElementPosition(r),this._checkIfViewHasChanged()&&this.update(),r},i.removeElementById=function(e){this.elements&&(this.elements=this.elements.filter(function(r){return r.id!==e}))},i.updateElementPropsById=function(e,r){this.elements&&(this.elements=this.elements.map(function(n){return n.id===e?n.updateProps(r):n})),this.update()},i.resetElementStyles=function(e){P(e)},i.update=function(){var e=this._getScrollPosition(),r=e[0],n=e[1];this.scroll.setScroll(r,n),this._setViewSize(),this._updateAllElements({updateCache:!0})},i.updateScrollContainer=function(e){this._removeListeners(this.viewEl),this.viewEl=e,this._hasScrollContainer=!!e,this.view=new $({width:0,height:0,scrollWidth:0,scrollHeight:0,scrollContainer:e}),this._setViewSize(),this._addListeners(this.viewEl),this._updateAllElements({updateCache:!0})},i.disableParallaxController=function(){this.disabled=!0,this._removeListeners(this.viewEl),this.elements&&this.elements.forEach(function(e){return P(e)})},i.enableParallaxController=function(){var e=this;this.disabled=!1,this.elements&&this.elements.forEach(function(r){return r.updateElementOptions({disabledParallaxController:!1,scrollAxis:e.scrollAxis})}),this._addListeners(this.viewEl),this._addResizeObserver(),this._setViewSize()},i.disableAllElements=function(){console.warn("deprecated: use disableParallaxController() instead"),this.elements&&(this.elements=this.elements.map(function(e){return e.updateProps({disabled:!0})})),this.update()},i.enableAllElements=function(){console.warn("deprecated: use enableParallaxController() instead"),this.elements&&(this.elements=this.elements.map(function(e){return e.updateProps({disabled:!1})})),this.update()},i.destroy=function(){this._removeListeners(this.viewEl),this.elements&&this.elements.forEach(function(e){return P(e)}),this.elements=void 0},t}();export{Ht as P,g as S,Y as p};
