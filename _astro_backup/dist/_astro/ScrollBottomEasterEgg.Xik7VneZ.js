import{j as t}from"./jsx-runtime.C51r_xpA.js";import{r as i}from"./index.BoyW3vH1.js";import{c as f}from"./utils.CeKArU98.js";import{g as y}from"./sounds.DF7YQAKo.js";import{m as j}from"./motion.D2zQmLs4.js";import"./clsx.B-dksMZM.js";import"./bundle-mjs.CSqCgoPn.js";function S({className:o,style:e}){return t.jsx("div",{className:f("fire-sprite fire-animate",o),style:{width:"192px",height:"172px",backgroundSize:"1344px 172px",...e}})}function N({className:o,weatherType:e="clear",intensity:p="medium"}){const[l,c]=i.useState(e),[b,g]=i.useState(p);i.useEffect(()=>{if(e!=="clear")return;const s=["clear","rain","snow","fog"],a=["light","medium","heavy"],r=setInterval(()=>{c(s[Math.floor(Math.random()*s.length)]),g(a[Math.floor(Math.random()*a.length)])},15e3);return()=>clearInterval(r)},[e]);const n=e==="clear"?l:e,d=e==="clear"?b:p,u=Math.floor((()=>{const s=d==="light"?30:d==="medium"?60:100;return n==="snow"?s*.7:s})());return n==="clear"?null:t.jsxs("div",{className:f("pointer-events-none absolute inset-0 z-[5] overflow-hidden",o),children:[n==="fog"&&t.jsxs("div",{className:"absolute inset-0",children:[t.jsx("div",{className:"absolute inset-0 bg-gray-300 opacity-30 dark:bg-gray-600",style:{mask:`
							linear-gradient(to bottom, transparent 0%, black 15%, black 85%, transparent 100%),
							linear-gradient(to right, transparent 0%, black 10%, black 90%, transparent 100%),
							radial-gradient(circle at 20% 40%, transparent 20%, black 40%, transparent 60%),
							radial-gradient(circle at 80% 30%, transparent 15%, black 35%, transparent 55%),
							radial-gradient(circle at 40% 70%, transparent 25%, black 45%, transparent 65%),
							radial-gradient(circle at 90% 60%, transparent 20%, black 40%, transparent 60%)
						`,maskComposite:"intersect"}}),t.jsx("div",{className:"absolute inset-0 animate-[fogDrift_20s_linear_infinite] bg-gray-400 opacity-20 dark:bg-gray-500",style:{mask:`
							linear-gradient(to bottom, transparent 0%, black 20%, black 80%, transparent 100%),
							linear-gradient(to right, transparent 0%, black 15%, black 85%, transparent 100%),
							radial-gradient(ellipse at 60% 50%, transparent 30%, black 50%, transparent 70%),
							radial-gradient(ellipse at 30% 40%, transparent 25%, black 45%, transparent 65%)
						`,maskComposite:"intersect"}})]}),n==="rain"&&t.jsx("div",{className:"rain-container absolute inset-0",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",pointerEvents:"none"},children:[...Array(u)].map((s,a)=>t.jsx("div",{className:"w-px animate-[rainFall_0.5s_linear_infinite] bg-blue-400 opacity-70 dark:bg-blue-300",style:{position:"absolute",left:`${Math.random()*100}vw`,top:"-20px",height:`${8+Math.random()*12}px`,animationDelay:`${Math.random()*2}s`,animationDuration:`${.3+Math.random()*.4}s`,transform:"translateX(0px) translateY(0px)",willChange:"top"}},`rain-${a}`))}),n==="snow"&&t.jsx("div",{className:"snow-container absolute inset-0",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",pointerEvents:"none"},children:[...Array(u)].map((s,a)=>t.jsx("div",{className:"h-1 w-1 animate-[snowFall_3s_linear_infinite] rounded-full bg-white opacity-80",style:{position:"absolute",left:`${Math.random()*100}vw`,top:"-10px",animationDelay:`${Math.random()*3}s`,animationDuration:`${2+Math.random()*4}s`,transform:"translateX(0px) translateY(0px)",willChange:"top, transform"}},`snow-${a}`))}),n==="rain"&&t.jsx("div",{className:"absolute inset-0 bg-blue-900 opacity-5 dark:bg-blue-800"}),n==="snow"&&t.jsx("div",{className:"absolute inset-0 bg-blue-50 opacity-10 dark:bg-slate-700"})]})}function E({className:o,height:e=320}){const[p,l]=i.useState({x:0,y:0}),[c,b]=i.useState(!0),[g,n]=i.useState(8);i.useEffect(()=>{const u=r=>{const h=(r.clientX/window.innerWidth-.5)*2,x=(r.clientY/window.innerHeight-.5)*2;l({x:h,y:x})},s=()=>{b(document.documentElement.classList.contains("dark"))};s();const a=new MutationObserver(s);return a.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),window.addEventListener("mousemove",u),()=>{window.removeEventListener("mousemove",u),a.disconnect()}},[]);const d=()=>{y("cat"),n(3),setTimeout(()=>n(8),1e3)},m=c?"dark":"light";return t.jsxs("div",{className:f("relative mx-auto w-full overflow-hidden",o),style:{height:`${e}px`},children:[t.jsx("div",{className:"absolute bottom-32 h-32 w-[120%] animate-[slideBG_60s_linear_infinite]",style:{backgroundImage:`url('/img/px/${m}/sky.${c?"jpg":"png"}')`,backgroundRepeat:"repeat-x",backgroundSize:"auto 100%",imageRendering:"pixelated"}}),t.jsx("div",{className:"absolute bottom-[100px] h-32 w-full transition-transform duration-100 ease-out",style:{backgroundImage:`url('/img/px/${m}/mountain.png')`,backgroundRepeat:"repeat-x",backgroundSize:"auto 100%",imageRendering:"pixelated",transform:`translate(${p.x*10}px, ${p.y*5}px)`}}),t.jsx("div",{className:"absolute bottom-8 h-16 w-full",style:{backgroundImage:`url('/img/px/${m}/grass.png')`,backgroundRepeat:"repeat-x",backgroundSize:"auto 100%",imageRendering:"pixelated"}}),t.jsx("div",{className:"absolute bottom-0 z-10 h-8 w-full",style:{backgroundImage:`url('/img/px/${m}/ground.${c?"jpg":"png"}')`,backgroundRepeat:"repeat-x",backgroundSize:"auto 100%",imageRendering:"pixelated"}}),t.jsx("img",{src:`/img/px/${m}/tree.png`,alt:"Tree",className:"pointer-events-none absolute bottom-8 z-20 h-32",style:{left:"15%",imageRendering:"pixelated"}}),t.jsx("img",{src:`/img/px/${m}/stone.png`,alt:"Stone",className:"pointer-events-none absolute bottom-8 z-20 h-20",style:{left:"60%",imageRendering:"pixelated"}}),t.jsx(S,{className:"absolute bottom-6 z-20",style:{left:"45%"}}),t.jsx("div",{className:"pointer-events-auto absolute bottom-5 z-10 h-32 w-32 cursor-pointer",style:{left:"-128px",imageRendering:"pixelated",animation:`runCat ${g}s linear infinite`},onClick:d,children:t.jsx("img",{src:"/img/banner.gif",alt:"Running cat",className:"h-full w-full object-contain",style:{imageRendering:"pixelated"}})}),t.jsx(N,{})]})}function D(){const[o,e]=i.useState(!1),[p,l]=i.useState(0),[c,b]=i.useState(0),[g,n]=i.useState(0);return i.useEffect(()=>{let d;const u=a=>{const r=Date.now();if(r-c<300)return;b(r);const h=document.documentElement.scrollHeight-window.innerHeight,x=window.scrollY,v=x>=h-10;v&&a.deltaY>0?(l(k=>{const w=k+1;return w>7&&e(!0),w}),clearTimeout(d),d=setTimeout(()=>{l(0)},2e3)):!v&&a.deltaY<0&&(l(0),e(!1)),n(x)},s=()=>{const a=document.documentElement.scrollHeight-window.innerHeight,r=window.scrollY;!(r>=a-10)&&r<g&&(l(0),e(!1)),n(r)};return window.addEventListener("wheel",u,{passive:!0}),window.addEventListener("scroll",s),()=>{window.removeEventListener("wheel",u),window.removeEventListener("scroll",s),clearTimeout(d)}},[c,g]),t.jsx(j.div,{className:"pointer-events-auto relative z-40 overflow-hidden",id:"pixelworld",initial:{y:"100%"},animate:{y:o?"0%":"100%",display:o?"block":"none",opacity:o?1:0},transition:{duration:.6,ease:"easeOut"},children:t.jsx(E,{className:"border-t border-neutral-800/50"})})}export{D as default};
